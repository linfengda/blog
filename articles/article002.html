<!DOCTYPE HTML>
<!--
	Massively by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Generic Page - Massively by HTML5 UP</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="../assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-loading">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<a href="../index.html" class="logo">Massively</a>
					</header>

				<!-- Nav -->
					<nav id="nav">
						<ul class="links">
							<li><a href="../index.html">Massively</a></li>
							<li class="active"><a href="../generic.html">Page guide</a></li>
						</ul>
					</nav>

				<!-- Main -->
					<div id="main">

						<!-- Post -->
							<section class="post">
								<header class="major">
									<span class="date">February 22, 2018</span>
									<h1>HTML transfer into PDF</h1>
									<p>PDF document is a popular document type in many ways, such as scientific paper/book/business report. in this blog, I am going to show you how to translate HTML document to PDF document, after reading my idea, you will realize that our imagination is limited by our understanding of code. </p>
								</header>
						    
              <!-- Definition area -->
                <h3>Definition</h3>
                  <dl>
                    <dt>词法</dt>
                    <dd>
                      <p>词汇通常用正则表达式表示<br>INTEGER :0|[1-9][0-9]*<br>PLUS : +<br>MINUS: -<br></p>
                    </dd>
                    <dt>语法</dt>
                    <dd>
                      <p>语法通常使用一种称为 BNF 的格式来定义<br>expression :=  term  operation  term<br>operation :=  PLUS | MINUS<br>term := INTEGER | expression<br></p>
                    </dd>
                    <dt>iText</dt>
                    <dd>
                      <p>iText是一个操作PDF文档的开源项目，由java和.net编写。<br>
                      iText在能够创建标准PDF的同时，还能将XML、HTML、Web表单、CSS或者其他数据库文件转换成PDF，而且保证格式的标准统一。<br>
                      iText可以切割、合并文档，还对页面进行复制、导入和覆盖的操作，同时可以加入、编写结构更加丰富的多样化内容，比如条形码、水印、印章、表格和图片等。<br> 
                      </p>
                    </dd>
                  </dl>

                <!-- Introduction area -->
                  <h3>HTML文档格式</h3>
                  <p>
                    <span class="image left"><img src="../images/How-browsers-work0.png" alt="" /></span>
                    作为超文本标记语言，HTML定义了展示网页信息一种规范。浏览器在解释HTML生成最终视图的时候，大概是这样的：
                    <br>1. 解析文档；<br>
                    <br>2. 布局，为每个节点分配一个应出现在屏幕上的确切坐标；
                    <br>3. 绘制，呈现引擎会遍历呈现树，由用户界面后端层将每个节点绘制出来；
                    <br>4. 显示，值得注意的是这一步并不会等到文档解析完成，会将部分已解析的文档尽快显示。
                  </p>
                  <p>
                    <span><img src="../images/How-browsers-work1.png" alt="" /></span>
                    <br>图1：浏览器主要组件
                  </p>
                  <p>
                    <span><img src="../images/How-browsers-work2.png" alt="" /></span>
                    <br>图2：呈现引擎的基本流程
                  </p>
                  <p>
                    <span><img src="../images/How-browsers-work3.png" alt="" /></span>
                    <br>图3：WebKit 主流程
                  </p>


							<!-- Code area -->
								<pre>
									<code>
                    <xmp>
                    
//假设一个HTML文档如下：
<pre class="prettyprint"><code class="hljs xml has-numbering"><span class="hljs-doctype">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">http-equiv</span>=<span class="hljs-value">"content-type"</span> <span class="hljs-attribute">content</span>=<span class="hljs-value">"text/html;charset=utf-8"</span> /&gt;</span>
 <span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- 诗词展示 --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">"font-family: msyh;text-align: center;"</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">h2</span>&gt;</span>早发白帝城<span class="hljs-tag">&lt;/<span class="hljs-title">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">"padding: 20px 20px; background-color: rgb(250, 192, 143);font-family: simkai;"</span>&gt;</span>
          朝辞白帝彩云间，千里江陵一日还。<span class="hljs-tag">&lt;<span class="hljs-title">br</span> /&gt;</span>
          两岸猿声啼不住，轻舟已过万重山。<span class="hljs-tag">&lt;<span class="hljs-title">br</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">h2</span>&gt;</span>赠汪伦<span class="hljs-tag">&lt;/<span class="hljs-title">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">"padding: 20px 20px; background-color: rgb(250, 192, 143);font-family: simkai;"</span>&gt;</span>
          李白乘舟将欲行，忽闻岸上踏歌声。<span class="hljs-tag">&lt;<span class="hljs-title">br</span> /&gt;</span>
          桃花潭水深千尺，不及汪伦送我情。<span class="hljs-tag">&lt;<span class="hljs-title">br</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">h2</span>&gt;</span>望庐山瀑布<span class="hljs-tag">&lt;/<span class="hljs-title">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">"padding: 20px 20px; background-color: rgb(250, 192, 143);font-family: simkai;"</span>&gt;</span>
            日照香炉生紫烟，遥看瀑布挂前川。<span class="hljs-tag">&lt;<span class="hljs-title">br</span> /&gt;</span>
              飞流直下三千尺，疑是银河落九天。<span class="hljs-tag">&lt;<span class="hljs-title">br</span> /&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>

  <span class="hljs-comment">&lt;!-- 古词释义 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">"text-shadow: 5px 5px 5px #787878;color: #fff;background-color: #CDC9C9;"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">"margin-right: 10px;"</span>&gt;</span>☆<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>发：启程。白帝城：故址在今重庆市奉节县白帝山上。<span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">"margin-right: 10px;"</span>&gt;</span>☆<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>踏歌：唐代民间流行的一种手拉手、两足踏地为节拍的歌舞形式，可以边走边唱。<span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">"margin-right: 10px;"</span>&gt;</span>☆<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>桃花潭：在今安徽泾县西南一百里。《一统志》谓其深不可测。深千尺：诗人用潭水深千尺比喻汪伦与他的友情，运用了夸张的手法。<span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>


 <span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li><li style="color: rgb(153, 153, 153);">11</li><li style="color: rgb(153, 153, 153);">12</li><li style="color: rgb(153, 153, 153);">13</li><li style="color: rgb(153, 153, 153);">14</li><li style="color: rgb(153, 153, 153);">15</li><li style="color: rgb(153, 153, 153);">16</li><li style="color: rgb(153, 153, 153);">17</li><li style="color: rgb(153, 153, 153);">18</li><li style="color: rgb(153, 153, 153);">19</li><li style="color: rgb(153, 153, 153);">20</li><li style="color: rgb(153, 153, 153);">21</li><li style="color: rgb(153, 153, 153);">22</li><li style="color: rgb(153, 153, 153);">23</li><li style="color: rgb(153, 153, 153);">24</li><li style="color: rgb(153, 153, 153);">25</li><li style="color: rgb(153, 153, 153);">26</li><li style="color: rgb(153, 153, 153);">27</li><li style="color: rgb(153, 153, 153);">28</li><li style="color: rgb(153, 153, 153);">29</li><li style="color: rgb(153, 153, 153);">30</li><li style="color: rgb(153, 153, 153);">31</li><li style="color: rgb(153, 153, 153);">32</li><li style="color: rgb(153, 153, 153);">33</li><li style="color: rgb(153, 153, 153);">34</li><li style="color: rgb(153, 153, 153);">35</li><li style="color: rgb(153, 153, 153);">36</li><li style="color: rgb(153, 153, 153);">37</li><li style="color: rgb(153, 153, 153);">38</li></ul></pre>

                    </xmp>
									</code>
								</pre>

                <p><span class="image right"><img src="../images/article002_001.png" alt="" /></span>
                需要解析这个文档，我们需要知道：文档中每个符号代表的意义不是固定的，而是配合当前文档上下文的语义来解释。这意味着，读取同样的字符，可能因为当前状态的不同，得到不同的下一个状态。<br>
                那么我们可以用数学的方式来解这道难题：<br>
                将解析HTML过程中当前状态抽象为“状态”，所有解析操作放在当前“状态”下执行。大概是这样的：<br>

                </p>




							</section>

					</div>



				<!-- Copyright -->
					<div id="copyright">
						<ul><li>&copy; Untitled</li><li>Design: <a href="https://github.com/linfengda">genius_lin</a></li></ul>
					</div>

			</div>

		<!-- Scripts -->
			<script src="../assets/js/jquery.min.js"></script>
			<script src="../assets/js/jquery.scrollex.min.js"></script>
			<script src="../assets/js/jquery.scrolly.min.js"></script>
			<script src="../assets/js/skel.min.js"></script>
			<script src="../assets/js/util.js"></script>
			<script src="../assets/js/main.js"></script>

	</body>
</html>